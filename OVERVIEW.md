# ğŸ“± POS æ”¶é“¶å¹³æ¿åº”ç”¨ - é¡¹ç›®æ¶æ„æ¦‚è§ˆ

## ğŸ¯ æ ¸å¿ƒä»·å€¼

è¿™æ˜¯ä¸€ä¸ª**ç”Ÿäº§çº§åˆ«**çš„ç°ä»£åŒ– Android åº”ç”¨æ¡†æ¶ï¼Œé‡‡ç”¨ä¸šç•Œæœ€ä½³å®è·µï¼š

- âœ… **å®Œå…¨è§£è€¦**: MVI å•å‘æ•°æ®æµï¼Œå„å±‚ç‹¬ç«‹å¯æµ‹è¯•
- âœ… **å“åº”å¼ç¼–ç¨‹**: StateFlow + Flow é©±åŠ¨çš„å®æ—¶ UI æ›´æ–°
- âœ… **æ¨¡å—åŒ–è®¾è®¡**: åŠŸèƒ½æ¨¡å—ç‹¬ç«‹ï¼Œæ”¯æŒç‹¬ç«‹ç¼–è¯‘å’Œå‘å¸ƒ
- âœ… **ç±»å‹å®‰å…¨**: Kotlin å¯†å°ç±»å’Œæ‰©å±•å‡½æ•°ï¼Œç¼–è¯‘æ—¶æ£€æŸ¥
- âœ… **ç¼–è¯‘æ—¶ DI**: Hilt ä¾èµ–æ³¨å…¥ï¼Œé›¶è¿è¡Œæ—¶åå°„
- âœ… **å³æ’å³ç”¨**: å®Œæ•´çš„ç¤ºä¾‹å®ç°ï¼Œå¯ç›´æ¥å­¦ä¹ å’Œå‚è€ƒ

---

## ğŸ—ï¸ æ¶æ„åˆ†å±‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     UI å±‚ (Compose)                          â”‚
â”‚   POSScreen | ScannerScreen | PaymentScreen | PrinterScreen â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ collectAsState()
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ViewModel å±‚ (MVI åè°ƒ)                         â”‚
â”‚  POSViewModel | ScannerViewModel | PaymentViewModel | ...   â”‚
â”‚                                                              â”‚
â”‚  - handleIntent()    å¤„ç†ç”¨æˆ·äº¤äº’                           â”‚
â”‚  - setState()        æ›´æ–° UI çŠ¶æ€                           â”‚
â”‚  - sendEffect()      å‘é€å•æ¬¡äº‹ä»¶                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ ä¸šåŠ¡é€»è¾‘å¤„ç†
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Repository å±‚ (æ•°æ®èšåˆ)                          â”‚
â”‚  ProductRepository | CartRepository | OrderRepository | ... â”‚
â”‚                                                              â”‚
â”‚  - ç»Ÿä¸€æ•°æ®è®¿é—®æ¥å£                                        â”‚
â”‚  - æœ¬åœ°å’Œè¿œç¨‹æ•°æ®åè°ƒ                                      â”‚
â”‚  - ç¼“å­˜å’ŒåŒæ­¥ç­–ç•¥                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â†“                        â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Room DB  â”‚          â”‚  Retrofit   â”‚
    â”‚ (æœ¬åœ°)   â”‚          â”‚  (è¿œç¨‹ API) â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‚ å®Œæ•´ç›®å½•æ ‘

```
mvi-app/
â”œâ”€â”€ app/                              # ä¸»åº”ç”¨æ¨¡å—
â”‚   â”œâ”€â”€ build.gradle.kts
â”‚   â”œâ”€â”€ src/main/
â”‚   â”‚   â”œâ”€â”€ java/com/pos/app/
â”‚   â”‚   â”‚   â”œâ”€â”€ MainActivity.kt        (å¯¼èˆªå’Œ UI å…¥å£)
â”‚   â”‚   â”‚   â””â”€â”€ POSApplication.kt      (Hilt åˆå§‹åŒ–)
â”‚   â”‚   â””â”€â”€ AndroidManifest.xml
â”‚
â”œâ”€â”€ core/                             # æ ¸å¿ƒæ¡†æ¶æ¨¡å—
â”‚   â”œâ”€â”€ build.gradle.kts
â”‚   â””â”€â”€ src/main/java/com/pos/core/
â”‚       â”œâ”€â”€ mvi/
â”‚       â”‚   â”œâ”€â”€ MviContract.kt         (Intent/State/Effect æ¥å£)
â”‚       â”‚   â””â”€â”€ MviViewModel.kt        (MVI ViewModel åŸºç±»)
â”‚       â””â”€â”€ result/
â”‚           â””â”€â”€ Result.kt              (å¼‚æ­¥ç»“æœåŒ…è£…ç±»)
â”‚
â”œâ”€â”€ data/                             # æ•°æ®å±‚æ¨¡å—
â”‚   â”œâ”€â”€ build.gradle.kts
â”‚   â””â”€â”€ src/main/java/com/pos/data/
â”‚       â”œâ”€â”€ db/
â”‚       â”‚   â”œâ”€â”€ POSDatabase.kt         (Room æ•°æ®åº“é…ç½®)
â”‚       â”‚   â”œâ”€â”€ entity/
â”‚       â”‚   â”‚   â””â”€â”€ Entities.kt        (ProductEntity, OrderEntity, ç­‰)
â”‚       â”‚   â””â”€â”€ dao/
â”‚       â”‚       â””â”€â”€ Daos.kt            (ProductDao, OrderDao, ç­‰)
â”‚       â”œâ”€â”€ network/
â”‚       â”‚   â”œâ”€â”€ POSApi.kt              (API æ¥å£å®šä¹‰)
â”‚       â”‚   â””â”€â”€ model/
â”‚       â”‚       â””â”€â”€ ApiModels.kt       (API æ•°æ®æ¨¡å‹)
â”‚       â”œâ”€â”€ repository/
â”‚       â”‚   â””â”€â”€ Repositories.kt        (ProductRepository, PaymentRepository, ç­‰)
â”‚       â””â”€â”€ di/
â”‚           â””â”€â”€ DataModule.kt          (Hilt ä¾èµ–æ³¨å…¥é…ç½®)
â”‚
â”œâ”€â”€ ui/                               # UI ç»„ä»¶åº“æ¨¡å—
â”‚   â”œâ”€â”€ build.gradle.kts
â”‚   â””â”€â”€ src/main/java/com/pos/ui/
â”‚       â”œâ”€â”€ theme/
â”‚       â”‚   â””â”€â”€ Theme.kt               (Material Design 3 ä¸»é¢˜)
â”‚       â””â”€â”€ components/
â”‚           â””â”€â”€ POSComponents.kt       (ProductCard, CartItemRow, ç­‰)
â”‚
â”œâ”€â”€ feature/
â”‚   â”‚
â”‚   â”œâ”€â”€ pos/                          # POS æ”¶é“¶æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ build.gradle.kts
â”‚   â”‚   â””â”€â”€ src/main/java/com/pos/feature/pos/
â”‚   â”‚       â”œâ”€â”€ mvi/
â”‚   â”‚       â”‚   â””â”€â”€ POSContract.kt     (POSIntent, POSState, POSEffect)
â”‚   â”‚       â”œâ”€â”€ viewmodel/
â”‚   â”‚       â”‚   â””â”€â”€ POSViewModel.kt    (ä¸šåŠ¡é€»è¾‘: ~200 è¡Œ)
â”‚   â”‚       â””â”€â”€ screen/
â”‚   â”‚           â””â”€â”€ POSScreen.kt       (UI å®ç°: åŒåˆ—å¸ƒå±€)
â”‚   â”‚
â”‚   â”œâ”€â”€ scanner/                      # æ‰«ç æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ build.gradle.kts
â”‚   â”‚   â””â”€â”€ src/main/java/com/pos/feature/scanner/
â”‚   â”‚       â”œâ”€â”€ mvi/
â”‚   â”‚       â”‚   â””â”€â”€ ScannerContract.kt
â”‚   â”‚       â”œâ”€â”€ viewmodel/
â”‚   â”‚       â”‚   â””â”€â”€ ScannerViewModel.kt (ML Kit æ‰«ç )
â”‚   â”‚       â””â”€â”€ screen/
â”‚   â”‚           â””â”€â”€ ScannerScreen.kt
â”‚   â”‚
â”‚   â”œâ”€â”€ payment/                      # æ”¯ä»˜æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ build.gradle.kts
â”‚   â”‚   â””â”€â”€ src/main/java/com/pos/feature/payment/
â”‚   â”‚       â”œâ”€â”€ mvi/
â”‚   â”‚       â”‚   â””â”€â”€ PaymentContract.kt
â”‚   â”‚       â”œâ”€â”€ viewmodel/
â”‚   â”‚       â”‚   â””â”€â”€ PaymentViewModel.kt (æ”¯ä»˜å¤„ç†: ~250 è¡Œ)
â”‚   â”‚       â””â”€â”€ screen/
â”‚   â”‚           â””â”€â”€ PaymentScreen.kt
â”‚   â”‚
â”‚   â””â”€â”€ printer/                      # æ‰“å°æ¨¡å—
â”‚       â”œâ”€â”€ build.gradle.kts
â”‚       â””â”€â”€ src/main/java/com/pos/feature/printer/
â”‚           â”œâ”€â”€ mvi/
â”‚           â”‚   â””â”€â”€ PrinterContract.kt
â”‚           â”œâ”€â”€ viewmodel/
â”‚           â”‚   â””â”€â”€ PrinterViewModel.kt (æ‰“å°ç®¡ç†: ~350 è¡Œ)
â”‚           â””â”€â”€ screen/
â”‚               â””â”€â”€ PrinterScreen.kt
â”‚
â”œâ”€â”€ gradle/
â”‚   â””â”€â”€ libs.versions.toml             # ä¾èµ–ç‰ˆæœ¬ç»Ÿä¸€ç®¡ç†
â”œâ”€â”€ settings.gradle.kts                # æ¨¡å—é…ç½®
â”œâ”€â”€ build.gradle.kts                   # æ ¹é¡¹ç›®é…ç½®
â”‚
â”œâ”€â”€ ğŸ“– æ–‡æ¡£
â”œâ”€â”€ README.md                          # é¡¹ç›®ä»‹ç»
â”œâ”€â”€ ARCHITECTURE.md                    # æ·±å…¥æ¶æ„è®¾è®¡
â”œâ”€â”€ QUICKSTART.md                      # å¿«é€Ÿå¼€å§‹æŒ‡å—
â””â”€â”€ PROJECT_COMPLETION.md              # é¡¹ç›®å®Œæˆæƒ…å†µ
```

---

## ğŸ”„ æ•°æ®æµç¤ºä¾‹: è´­ç‰©è½¦ç»“ç®—æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ç”¨æˆ·æ“ä½œ                                    â”‚
â”‚              ç‚¹å‡»"ç»“è´¦"æŒ‰é’®                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   POSScreen.kt (UI)                              â”‚
â”‚              å‘é€ Intent åˆ° ViewModel                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              POSViewModel.processIntent()                        â”‚
â”‚      handleIntent(POSIntent.ProceedToCheckout)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â”œâ”€ éªŒè¯è´­ç‰©è½¦éç©º
                     â”‚
                     â”œâ”€ è®¡ç®—è®¢å•ä¿¡æ¯ï¼š
                     â”‚  â”œâ”€ å°è®¡ = cartItems.sumOf { price * qty }
                     â”‚  â”œâ”€ æŠ˜æ‰£ = å°è®¡ * discountPercent
                     â”‚  â””â”€ æ€»è®¡ = å°è®¡ - æŠ˜æ‰£
                     â”‚
                     â””â”€ å‘é€ Effect: NavigateToPayment
                        (ä¼ é€’è®¢å• ID å’Œæ€»é‡‘é¢)
                     â”‚
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 PaymentScreen.kt (æ”¯ä»˜ç•Œé¢)                      â”‚
â”‚         ç”¨æˆ·é€‰æ‹©æ”¯ä»˜æ–¹å¼å’Œæäº¤æ”¯ä»˜                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             PaymentViewModel.processIntent()                     â”‚
â”‚    handleIntent(PaymentIntent.ProcessPayment(method, amount))   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â”œâ”€ çŠ¶æ€: PROCESSING
                     â”‚
                     â””â”€ è°ƒç”¨ PaymentRepository.processPayment()
                        â”‚
                        â”œâ”€ è°ƒç”¨ POSApi.processPayment()
                        â”‚  â””â”€ HTTP POST /api/payments
                        â”‚
                        â””â”€ è·å–å“åº”
                           â”œâ”€ TransactionEntity ä¿å­˜åˆ°æ•°æ®åº“
                           â”œâ”€ çŠ¶æ€: SUCCESS
                           â””â”€ å‘é€ Effect: PaymentSuccess(transactionId)
                     â”‚
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               PaymentScreen (æ˜¾ç¤ºæˆåŠŸä¿¡æ¯)                       â”‚
â”‚          ç”¨æˆ·ç‚¹å‡»"æ‰“å°æ”¶æ®"æŒ‰é’®                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               PrinterScreen.kt (æ‰“å°ç•Œé¢)                        â”‚
â”‚         é€‰æ‹©æ‰“å°æœºï¼Œæäº¤æ‰“å°ä»»åŠ¡                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            PrinterViewModel.processIntent()                      â”‚
â”‚     handleIntent(PrinterIntent.PrintReceipt(...))               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â”œâ”€ ç”Ÿæˆæ”¶æ®æ¨¡æ¿ (è®¢å•å·ã€å•†å“ã€é‡‘é¢ç­‰)
                     â”‚
                     â””â”€ è°ƒç”¨ PrintRepository.submitPrintJob()
                        â”‚
                        â”œâ”€ è°ƒç”¨ POSApi.submitPrintJob()
                        â”‚  â””â”€ HTTP POST /api/print
                        â”‚
                        â””â”€ PrintJobEntity ä¿å­˜åˆ°æ•°æ®åº“
                           â””â”€ çŠ¶æ€: SUCCESS
                              å‘é€ Effect: PrintSuccess(jobId)
                     â”‚
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               PrinterScreen (æ˜¾ç¤ºæ‰“å°æˆåŠŸ)                       â”‚
â”‚              ç”¨æˆ·ç‚¹å‡»"å®Œæˆ"æŒ‰é’®                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              è¿”å› POS ä¸»é¡µé¢ (POSScreen)                         â”‚
â”‚          æ¸…ç©ºè´­ç‰©è½¦ï¼Œé‡æ–°å¼€å§‹ä¸‹ä¸€ç¬”äº¤æ˜“                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’¾ æ•°æ®åº“è¡¨ç»“æ„

```sql
-- å•†å“è¡¨
CREATE TABLE products (
    id TEXT PRIMARY KEY,
    name TEXT,
    price REAL,
    barcode TEXT UNIQUE,
    category TEXT,
    stock INTEGER,
    isActive BOOLEAN,
    createdAt LONG,
    updatedAt LONG
);

-- è´­ç‰©è½¦è¡¨
CREATE TABLE cart_items (
    id TEXT PRIMARY KEY,
    productId TEXT,
    productName TEXT,
    price REAL,
    quantity INTEGER,
    cartId TEXT,
    addedAt LONG
);

-- è®¢å•è¡¨
CREATE TABLE orders (
    id TEXT PRIMARY KEY,
    orderNumber TEXT UNIQUE,
    totalAmount REAL,
    discountAmount REAL,
    paymentMethod TEXT,
    orderStatus TEXT,
    itemCount INTEGER,
    createdAt LONG,
    updatedAt LONG,
    printedAt LONG
);

-- è®¢å•æ˜ç»†è¡¨
CREATE TABLE order_items (
    id TEXT PRIMARY KEY,
    orderId TEXT,
    productId TEXT,
    productName TEXT,
    price REAL,
    quantity INTEGER,
    subtotal REAL
);

-- äº¤æ˜“è®°å½•è¡¨
CREATE TABLE transactions (
    id TEXT PRIMARY KEY,
    orderId TEXT,
    amount REAL,
    method TEXT,
    status TEXT,
    referenceNumber TEXT,
    createdAt LONG
);

-- æ‰“å°ä»»åŠ¡è¡¨
CREATE TABLE print_jobs (
    id TEXT PRIMARY KEY,
    orderId TEXT,
    content TEXT,
    status TEXT,
    copies INTEGER,
    createdAt LONG,
    printedAt LONG,
    errorMessage TEXT
);
```

---

## ğŸ“š å…³é”®æŠ€æœ¯ç‚¹

### 1. MVI æ¶æ„ä¸‰å±‚æµç¨‹
```kotlin
Intent â†’ ViewModel.processIntent() â†’ State æ›´æ–° â†’ UI é‡ç»„
         â†“
      Effect å‘é€ â†’ å¯¼èˆª/å¼¹çª—ç­‰å‰¯ä½œç”¨
```

### 2. å¼‚æ­¥æ“ä½œå¤„ç†
```kotlin
// åç¨‹ + Flow å®ç°å“åº”å¼æ•°æ®æµ
repository.getProducts()
    .map { Result.Loading }
    .catch { Result.Error(it) }
    .collect { result ->
        result.fold(
            onSuccess = { updateState { it.copy(products = data) } },
            onError = { sendEffect(Effect.ShowError(message)) }
        )
    }
```

### 3. æœ¬åœ°ä¼˜å…ˆç­–ç•¥
```kotlin
// ä¼˜å…ˆä»æœ¬åœ°æ•°æ®åº“è¯»å–ï¼Œåå°åŒæ­¥è¿œç¨‹æ•°æ®
val local = productDao.getProductByBarcode(barcode).firstOrNull()
if (local != null) {
    emit(Result.Success(local))
} else {
    val remote = api.getProductByBarcode(barcode)
    productDao.insertProduct(remote.toEntity())
    emit(Result.Success(remote.toEntity()))
}
```

### 4. Hilt ä¾èµ–æ³¨å…¥
```kotlin
@HiltViewModel
class POSViewModel @Inject constructor(
    private val productRepository: ProductRepository,
    private val cartRepository: CartRepository
) : MviViewModel<POSIntent, POSState, POSEffect>(POSState()) {
    // ViewModel è‡ªåŠ¨é€šè¿‡ Hilt åˆ›å»ºå’Œç®¡ç†ç”Ÿå‘½å‘¨æœŸ
}
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹æ­¥éª¤

### 1. å¯¼å…¥é¡¹ç›®
```bash
git clone <repository-url>
open -a "Android Studio" mvi-app
```

### 2. åŒæ­¥ Gradle
```
File â†’ Sync Now
æˆ–è¿è¡Œ: ./gradlew clean build
```

### 3. é…ç½® API åœ°å€
ç¼–è¾‘ `data/src/main/java/com/pos/data/di/DataModule.kt`:
```kotlin
.baseUrl("http://your-api-server.com/")
```

### 4. è¿è¡Œåº”ç”¨
```bash
./gradlew installDebug
adb shell am start -n com.pos.app/.MainActivity
```

---

## ğŸ“– æ–‡æ¡£å¯¼èˆª

| æ–‡æ¡£ | å†…å®¹ |
|------|------|
| **README.md** | é¡¹ç›®ä»‹ç»ã€ç‰¹ç‚¹ã€ä¾èµ–ã€å¿«é€Ÿå¼€å§‹ |
| **ARCHITECTURE.md** | è¯¦ç»†æ¶æ„è®¾è®¡ã€ä»£ç ç¤ºä¾‹ã€æœ€ä½³å®è·µ |
| **QUICKSTART.md** | å¼€å‘ä»»åŠ¡æ•™ç¨‹ã€è°ƒè¯•æŠ€å·§ã€å¸¸è§é—®é¢˜ |
| **PROJECT_COMPLETION.md** | é¡¹ç›®å®Œæˆæ¸…å•ã€æ–‡ä»¶ç»Ÿè®¡ã€åŠŸèƒ½åˆ—è¡¨ |

---

## âœ¨ é¡¹ç›®ç‰¹è‰²

### ğŸ¯ é¢å‘ç”Ÿäº§
- å®Œæ•´çš„é”™è¯¯å¤„ç†æœºåˆ¶
- æ—¥å¿—å’Œç›‘æ§èƒ½åŠ›
- å®‰å…¨å’Œæƒé™ç®¡ç†
- æ€§èƒ½ä¼˜åŒ–å»ºè®®

### ğŸ“š æ•™è‚²ä»·å€¼
- è¯¦ç»†çš„ä»£ç æ³¨é‡Š
- å®Œå–„çš„æ–‡æ¡£
- å®æˆ˜ä»£ç ç¤ºä¾‹
- æ¸…æ™°çš„æ¶æ„è®¾è®¡

### ğŸ”§ æ˜“äºæ‰©å±•
- æ¨¡å—åŒ–è®¾è®¡
- ä½è€¦åˆé«˜å†…èš
- æ¥å£å¯¼å‘ç¼–ç¨‹
- ä¾èµ–æ³¨å…¥æ¡†æ¶

### âš¡ é«˜æ•ˆå¼€å‘
- å¼€ç®±å³ç”¨
- å¯å¤ç”¨ç»„ä»¶
- ç»Ÿä¸€é…ç½®ç®¡ç†
- å¿«é€ŸåŸå‹å¼€å‘

---

**è¿™æ˜¯ä¸€ä¸ªå®Œæ•´ã€ç°ä»£ã€å¯ç”Ÿäº§çš„ Android åº”ç”¨æ¡†æ¶ï¼** ğŸ‰

*æœ€åæ›´æ–°: 2025å¹´12æœˆ*
